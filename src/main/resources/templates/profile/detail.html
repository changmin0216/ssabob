<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${profile.name} + '님의 프로필'">프로필</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff');
        :root {
            --ssafy-blue: #004A94;
            --ssafy-blue-light: #f0f4f8;
        }
        body {
            background-color: var(--ssafy-blue-light);
            font-family: 'GmarketSansMedium', sans-serif;
        }
        .profile-header {
            background-color: var(--ssafy-blue);
            color: white;
            padding: 3rem 1rem;
            text-align: center;
        }
        .tag-badge {
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            padding: 0.5em 0.9em;
        }
    </style>
</head>
<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<header class="profile-header">
    <div class="container">
        <h1 th:text="${profile.name} + ' 님의 프로필'">사용자 프로필</h1>
        <p class="lead" th:text="${profile.shortBio}">한 줄 자기소개</p>
    </div>
</header>

<main class="container my-5">
    <div class="row">
        <!-- 기본 정보 -->
        <div class="col-md-4">
            <div class="card">
                <div class="card-header fs-5 fw-bold">기본 정보</div>
                <div class="card-body">
                    <p><strong>이름:</strong> <span th:text="${profile.name}"></span></p>
                    <p><strong>지역:</strong> <span th:text="${profile.region}"></span></p>
                    <p><strong>반:</strong> <span th:text="${profile.classInfo}"></span></p>
                    <div th:if="${profile.githubUrl}">
                        <a th:href="${profile.githubUrl}" target="_blank" class="btn btn-dark w-100">
                            <i class="bi bi-github"></i> GitHub 방문하기
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 추가 정보 -->
        <div class="col-md-8">
            <div class="card">
                <div class="card-header fs-5 fw-bold">추가 정보</div>
                <div class="card-body">
                    <h5><i class="bi bi-tools"></i> 기술 스택</h5>
                    <div th:if="${profile.techStacks != null and !profile.techStacks.isEmpty()}" class="mb-4">
                        <span th:each="tag : ${#strings.arraySplit(profile.techStacks, ',')}" th:text="'# ' + ${#strings.trim(tag)}" class="badge rounded-pill text-bg-primary tag-badge"></span>
                    </div>
                    <p th:if="${profile.techStacks == null or profile.techStacks.isEmpty()}" class="text-muted">등록된 기술 스택이 없습니다.</p>

                    <hr>

                    <h5><i class="bi bi-briefcase-fill"></i> 관심 취업 분야</h5>
                    <div th:if="${profile.interestFields != null and !profile.interestFields.isEmpty()}" class="mb-4">
                        <span th:each="tag : ${#strings.arraySplit(profile.interestFields, ',')}" th:text="'# ' + ${#strings.trim(tag)}" class="badge rounded-pill text-bg-success tag-badge"></span>
                    </div>
                    <p th:if="${profile.interestFields == null or profile.interestFields.isEmpty()}" class="text-muted">등록된 관심 분야가 없습니다.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 수정하기 버튼 -->
    <div class="text-center mt-4" th:if="${session.loginUser != null and session.loginUser.id == profile.id}">
        <a th:href="@{/profile/edit}" class="btn btn-primary btn-lg">프로필 수정하기</a>
    </div>

</main>

</body>
</html>